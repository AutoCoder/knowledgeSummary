#### 业务经验：

1. I2I的产出

   常见的I2I比如像Itemcf，swing， tag相似度，关联规则，矩阵分解swing， 深度学习（单塔，双塔）

   有一种融合的方法：

   在半屏页这种经典的I2I场景下，对这个场景的点击/展现做LTR模型训练，各个I2I的打分和排名以及query和doc的各种统计特征，作为特征进行训练，实现对多种I2I的融合。

   另外一种融合的方法：

   把用户在站外（百度）搜过，且在站内看过作为样本，这种样本避免了因为展现带来的bias

2. 聚类的问题，bandit

​       在短视频推荐中，探索用户兴趣的时候（bandit），使用item embedding 进行聚类。在类别中进行bandit，发现聚类的效果不好，每一类中一些item并不属于一类。这个可能是由于item embedding的训练结果不ok，特征是长尾embedding学习不充分。但是当使用视频的tag进行bandit时，效果正向很不错。

​       思路：基于第一个融合的I2I产出，可以得到一个item的graph，假设I2I已经做到足够好，那么可以在图上做社区发现，找到聚类。

   3. up主召回

      对于用户关注的up主，或者点击率比较高的up主的新内容进行召回

   4. up2up2i 召回

      由于关注的up主，可能更新频率不够。所以通过up主生产的embedding的内容，pooling得到up主的embedding，然后得到up2up， 然后把关联到的up主的内容，推荐给用户

      由于up主的变更没那么快，可以训练一个用户是否喜欢某个up主来进行相关的推荐





#### 工程问题：

深度模型线上服务化： 

1. opal 离线训练
2. jarvis部署 离线模型 （model version 管理， endpoint2 管理 ），endpoint2是对外的窗口，对内绑定最新的modelversion
3. enpoint 对应一个容器QAE， 需要绑定一个服务（注册一个服务发现）
4. 部署召回引擎服务（用户拉取特征数据，生成TFExample， 访问jarvis的tf-serving, 进行预估) （访问时通过服务名进行发现，老版本也通过内网vip来进行访问）
5. 调试召回引擎服务，可以通过QAE的内部端口进行调试访问